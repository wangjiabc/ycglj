<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>烟草专卖</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,minimal-ui" />

  <script src="/ycglj/js/jquery.min.js"></script>
  <!--jquery weui-->
  <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
  <link rel="stylesheet" href="../asset/css/icon.css">
  <link rel="stylesheet" href="../asset/css/weuix.css">
  <link rel="stylesheet" href="layui/css/layui.css" media="all">
  <script type="text/javascript" src="/ycglj/mobile/singleton.js"></script>

  <script type="text/javascript">
    var redirectUrl = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + APPID + "&redirect_uri=" + DOMAIN + "/ycglj/mobile/auditor/index.html&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";
  </script>

  <script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>

  <script type="text/javascript" src="js/index.js"></script>

</head>
<style>
  .current{
    opacity:0.4;
  }
  .weui-flex{padding: 10px;}
  .page-bd li {
                background-color: #fff;
                border-radius: 2px;
                cursor: pointer;
                margin: 10px 0;
                overflow: hidden;
                vertical-align: bottom;
                display: block;
            }

            .page-bd li.js-show .weui-flex {
                opacity: 0.4;
            }

            .page-bd li.js-show .page-category {
                height: auto;
            }

            .page-bd li.js-show .page-category-content {
                opacity: 1;
                transform: translateY(0px);
            }

            .page-bd li:first-child {
                margin-top: 0;
            }

            .page-bd .page-category {
                height: 0;
                overflow: hidden;
            }

            .page-bd .page-category-content {
                opacity: 0;
                transform: translateY(-50%);
                transition: 0.3s;
            }

            .page-bd .weui-flex {

                align-items: center;
                padding: 10px;
                transition: all 0.3s ease 0s;
                display: -webkit-flex;
                display: -webkit-box;
                display: flex;
            }

            .page-bd .weui-flex--item {
                -webkit-flex: 1 1 0;
                flex: 1 1 0;
            }

            .page-bd .weui-cells {
                margin-top: 0;
            }
  .header img {
    height: 100%;
    width: 100%;
    display: block;
  }

  .header {
    height: 30%;
  }

  .weui-grid__icon {
    height: 68px;
    width: 68px;
  }

  .weui-grid__label {
    font-size: 18px;
  }

  section {
    background-color: rgb(214, 100, 7);
    margin: 5px;
  }

  html,
  body {
    height: 100%;
  }

  .weui-grid {
    width: 50%;
    height: 50%;
    padding-top: 15%;
  }

  .weui-grid p {
    color: aliceblue;
  }

  /* section {
    background-color: rgb(214, 100, 7);
    margin: 5px;
  } */

  .text {
    color: white;
    position: relative;
  }

  .text p {
    line-height: 2.5em;
  }

  .pTitle {
    text-align: center;
  }

  .agree {
    position: absolute;
    bottom: 0;
    width: 100%;
    background-color: beige
  }

  .footer {
    height: 80px;
    text-align: right;
  }

  .weui-btn_mini {
    padding: 0 1.32em;
  }

  .footer a {
    top: 20%;
  }

  .bottom-bar {
    position: fixed !important;
    z-index: 9;
  }

  .weui-tabbar__icon {
    width: 40px;
    height: 40px;
  }

  .weui-tab__bd {
    height: 90%;
  }

  .weui-tabbar {
    height: 10%;
    z-index: 9;
  }
</style>

<body>
  <div class="weui-tab">
    <div class="weui-tab__bd">
      <div id="tab1" class="weui-tab__bd-item weui-tab__bd-item--active">
        <div class="header">
          <img src="../asset/images/manage.jpg">
        </div>
        <div class="weui-grids" style="height:70%">
          <a id="position" href="javascript:void(0)" class="weui-grid js_grid">
            <div class="weui-grid__icon">
              <img src="../asset/images/position.png" alt="">
            </div>
            <p class="weui-grid__label">
              零售点位
            </p>
          </a>
          <a id="case" href="javascript:void(0)" class="weui-grid js_grid">
            <div class="weui-grid__icon">
              <img src="../asset/images/case.png" alt="">
            </div>
            <p class="weui-grid__label">
              案件录入
            </p>
          </a>
          <a id="echart" href="javascript:void(0)" class="weui-grid js_grid">
            <div class="weui-grid__icon">
              <img src="../asset/images/chart.png" alt="">
            </div>
            <p class="weui-grid__label">
              信息统计
            </p>
          </a>
          <a id="b4" href="advice.html" class="weui-grid js_grid">
            <div class="weui-grid__icon">
              <img src="../asset/images/sup.png" alt="">
            </div>
            <p class="weui-grid__label">
              办案辅助
            </p>
          </a>
        </div>
      </div>
      <div id="tab2" class="weui-tab__bd-item">
        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>姓名</p>
          </div>
          <div id="name" class="weui-cell__ft">null</div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>单位</p>
          </div>
          <div id="unit" class="weui-cell__ft">null</div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>部门</p>
          </div>
          <div id="department" class="weui-cell__ft">null</div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>职务</p>
          </div>
          <div id="duty" class="weui-cell__ft">null</div>
        </div>

        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>手机号</p>
          </div>
          <a id="phone" class="weui-cell__ft">null</a>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__bd">
            <p>执法证编号</p>
          </div>
          <div id="card_number" class="weui-cell__ft">null</div>
        </div>
        <div class="weui-cell">
          <div class="weui-cell__bd weui_cell_primary name">
            <input id="input" class="weui-input" type="text" placeholder="请输入稽查人员姓名">
          </div>
          <a href="javascript:;" id="search" class="weui-btn weui-btn_mini weui-btn_primary">查 询</a>
        </div>
        <!-- <div class="weui-search-bar" id="searchBar">
          <form class="weui-search-bar__form">
            <div class="weui-search-bar__box">
              <i class="weui-icon-search"></i>
              <input type="search" class="weui-search-bar__input" id="searchInput" placeholder="搜索" required="">
              <a href="javascript:" class="weui-icon-clear" id="searchClear"></a>
            </div>
            <label class="weui-search-bar__label" id="searchText">
              <i class="weui-icon-search"></i>
              <span>搜索</span>
            </label>
          </form>
          <a href="javascript:" class="weui-search-bar__cancel-btn" id="searchCancel">取消</a>
        </div> -->
        <table class="layui-hide" id="test" lay-filter="test"></table>
        <div id="firstpane" class="menu_list">
        </div>
      </div>
    </div>

    <div class="weui-tabbar">
      <a href="#tab1" class="weui-tabbar__item weui-bar__item--on">
        <!-- <span class="weui-badge" style="position: absolute;top: -.4em;right: 1em;">8</span>  -->
        <div class="weui-tabbar__icon">
          <img src="../asset/images/information.png" alt="">
        </div>
        <p class="weui-tabbar__label">信息通知</p>
      </a>
      <a href="#tab2" class="weui-tabbar__item">
        <div class="weui-tabbar__icon">
          <img src="../asset/images/person.png" alt="">
        </div>
        <p class="weui-tabbar__label">个人中心</p>
      </a>
    </div>
  </div>
  <script type="text/javascript" src="layui/layui.js"></script>
  <script src="https://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
  <script src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.js"></script>
  <script>
    $(function () {
      FastClick.attach(document.body);
    });
  </script>
  <script>

    $.ajax({
      type: "get",
      url: "/ycglj/mobile/user/getCheckPerson.do?",
      contentType: 'application/x-www-form-urlencoded;charset=utf-8',
      data: {},
      dataType: "json",
      success: function (data) {
        $('#name').text(data.name);
        $('#unit').text(data.unit);
        $('#department').text(data.department);
        $('#duty').text(data.duty);
        $('#card_number').text(data.card_number);
        $('#phone').text(data.phone).attr('href', 'tel:' + data.phone);
      }
    });

    $(document).ready(function () {
      init();
      layui.use(['table', 'laytpl', 'layer', 'util'], function () {
        var table = layui.table,
          layer = layui.layer,
          laytpl = layui.laytpl,
          util = layui.util;
        table.render({
          elem: '#test'
          , url: '/ycglj/mobile/user/getAllCheckPerson.do?'
          , title: '稽查人员信息表'
          , page: true
          , cols: [[
            { field: 'id', title: 'ID', sort: true, width: 12 }
            , { field: 'name', title: '姓名', edit: 'text' }
            , { field: 'unit', edit: 'text', title: '单位' }
            , { field: 'department', edit: 'text', title: '部门' }
            , { field: 'duty', edit: 'text', title: '职务' }
            , { field: 'phone', title: '手机号', edit: 'text', hide: true }
            , { field: 'card_number', title: '执法证编号', edit: 'text', hide: true }
          ]],
        });
        //监听行单击事件
        table.on('row(test)', function (obj) {
          console.log(obj.tr) //得到当前行元素对象
          console.log(obj.data) //得到当前行数据
          console.log(obj.data.duty) //得到当前行数据
          $('#name').text(obj.data.name);
          $('#unit').text(obj.data.unit);
          $('#department').text(obj.data.department);
          $('#duty').text(obj.data.duty);
          $('#card_number').text(obj.data.card_number);
          $('#phone').text(obj.data.phone).attr('href', 'tel:' + obj.data.phone);
          $('#phone').css('color', "red");
          //obj.del(); //删除当前行
          //obj.update(fields) //修改当前行数据
        });
        $('#search').click(function () {
          var val = $('#input').val();
          $.ajax({
            type: "get",
            url: "/ycglj/mobile/user/getAllCheckPerson.do?page=0&limit=10&search=" + val,
            contentType: 'application/x-www-form-urlencoded;charset=utf-8',
            dataType: "json",
            success: function (data) {
              //执行重载
              table.reload('test', {
                where: data,
                url: '/ycglj/mobile/user/getAllCheckPerson.do?search=' + val,
              });
            },
            error: function (e) {
              console.log(e);
            }
          })
        })
        //搜索栏绑定事件
        $("#searchInput").bind('input propertychange', function () {
          var val = $(this).val();
          console.log(val);
          $.ajax({
            type: "get",
            url: "/ycglj/mobile/user/getAllCheckPerson.do?page=0&limit=10&search=" + val,
            contentType: 'application/x-www-form-urlencoded;charset=utf-8',
            dataType: "json",
            success: function (data) {
              //执行重载
              table.reload('test', {
                where: data,
                url: '/ycglj/mobile/user/getAllCheckPerson.do?search=' + val,
              });
              //点击取消后加载所有内容
              $('#searchCancel').click(function () {
                table.reload('test', {
                  where: data,
                  url: '/ycglj/mobile/user/getAllCheckPerson.do?',
                });
              })
            },
            error: function (e) {
              console.log(e);
            }
          })
        });
      })
    })

    //界面初始化渲染
    function init() {
      $('#position').css("background-color", "#904343");
      $('#case').css("background-color", "#925f39");
      $('#echart').css("background-color", "#304c68");
      $('#b4').css("background-color", "#77a3ad");
      $('#echart').click(function () {
        window.location.href = "echart.html";
      });
    }
    function setuserInfo(data) {

    }
  </script>
  <!-- <script>
    $(document).ready(function () {
      var html;
      $("#name0 .menu_body:eq(0)").show();
      init();
      //搜索栏绑定事件
      $("#searchInput").bind('input propertychange', function () {
        var val = $(this).val();
        console.log(val);
        if (val != "") {
          $.ajax({
            type: "get",
            url: "/ycglj/mobile/user/getAllCheckPerson.do?offset=0&limit=10&search=" + val,
            contentType: 'application/x-www-form-urlencoded;charset=utf-8',
            dataType: "json",
            success: function (data) {
              $('#firstpane').empty();
              setuserInfo(data);
            },
            error: function (e) {
              console.log(e);
            }
          })
        };
      });
    })
    //界面初始化渲染
    function init() {
      $('#position').css("background-color", "#904343");
      $('#case').css("background-color", "#925f39");
      $('#echart').css("background-color", "#304c68");
      $('#b4').css("background-color", "#77a3ad");
      $('#echart').click(function () {
        window.location.href = "echart.html";
      });
      $.ajax({
        type: "get",
        url: "/ycglj/mobile/user/getAllCheckPerson.do?offset=0&limit=30",
        contentType: 'application/x-www-form-urlencoded;charset=utf-8',
        dataType: "json",
        success: function (data) {
          setuserInfo(data);
        },
        error: function (e) {
          console.log(e);
        }
      });
    }
    //设置值
    function setValue(data, index) {
      $('#name' + index + '').text(data.data[index].name);
      $('#unit' + index + '').text(data.data[index].unit);
      $('#department' + index + '').text(data.data[index].department);
      $('#duty' + index + '').text(data.data[index].duty);
      $('#phone' + index + '').text(data.data[index].phone);
      $('#card_number' + index + '').text(data.data[index].card_number);
    }
    //界面渲染
    function setuserInfo(data) {
      console.log(data);
      for (let index = 0; index < data.data.length; index++) {
        html = '<div class="weui-flex">' +
          '<div id="name' + index + '" class="weui-flex__item">赵晓丹</div>' +
          '<i class="icon icon-74"></i></div>' +
          '<div id="toggle' + index + '" style="display:none;" class="menu_body">' +
          '<div class="weui-cell">' +
          '  <div class="weui-cell__bd"><p>单位</p></div>' +
          '<div id="unit' + index + '" class="weui-cell__ft">null</div>' +
          '</div>' +
          '<div class="weui-cell">' +
          '  <div class="weui-cell__bd"><p>部门</p></div>' +
          '<div id="department' + index + '" class="weui-cell__ft">null</div>' +
          '</div>' +
          '<div class="weui-cell">' +
          '  <div class="weui-cell__bd"><p>职务</p></div>' +
          '<div id="duty' + index + '" class="weui-cell__ft">null</div>' +
          '</div>' +
          '<div class="weui-cell">' +
          '  <div class="weui-cell__bd"><p>电话</p></div>' +
          '<a id="phone' + index + ' "href="tel:' + data.data[index].phone + '">' + data.data[index].phone + '</a>'
        '<div class="weui-cell">' +
          '  <div class="weui-cell__bd"><p>执法证编号</p></div>' +
          '<div id="card_number' + index + '" class="weui-cell__ft">null</div>' +
          '</div>'
        '</div>'
        $('.menu_list').append(html);
        setValue(data, index);
        // $("div.menu_body").slideToggle(300).siblings("div.menu_body").slideUp("slow");

      }
      $("div.weui-flex").click(function () {
        $(this).next('div.menu_body').slideToggle(300);
        // $("#toggle" + index).slideToggle(300).siblings("#toggle" + index).slideUp("slow");
        if ($(this).hasClass('current')) {
          $(this).removeClass('current');
          $(this).children('i').removeClass('icon-74').addClass('icon-35');
        } else {
          $(this).siblings().removeClass('current');
          $(this).addClass('current');
          $(this).children('i').removeClass('icon-35').addClass('icon-74');
          $(this).siblings().find('i').removeClass('icon-74').addClass('icon-35');
        }
      });
    }
  </script> -->
</body>

</html>